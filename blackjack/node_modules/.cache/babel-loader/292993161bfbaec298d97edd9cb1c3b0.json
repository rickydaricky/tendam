{"ast":null,"code":"var _jsxFileName = \"/Users/riarajesh/cs0320/term-project-eyan13-hlee184-mji13-rrajesh-wzhong3/blackjack/src/BlackJack.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components'; // import AwesomeButtonStyles from \"react-awesome-button/src/styles/styles.scss\";\n\nimport \"react-awesome-button/dist/styles.css\"; // import TextBox from \"./TextBox\";\n\nimport GameMessage from \"./GameMessage\";\nimport './BlackJack.css';\nimport Hand from \"./Hand.js\"; // import { useAuth } from \"../../context/AuthContext\";\n// import { useDatabase } from \"../../context/DatabaseContext\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet cardsOfDealer = [];\nlet cardValuesOfDealer = [];\nlet realDealerHand = [];\nlet dealerHand = [-1, -1];\n\nfunction BlackJack() {\n  _s();\n\n  // const { currentUser } = useAuth();\n  // const { getEntry, userDatabase } = useDatabase();\n  // const [profileInfo, setProfileInfo] = useState({\n  //     bio: \"\", name: \"\", age: \"\", matches: []});\n  // let dealerHand = [-1, -1];\n  // Sum of all values in a deck of card 4(1 + 2 + ... + 13).\n  const sumOfValues = 364;\n  const [deck, setDeck] = useState([]);\n  const [gameEnded, setGameEnded] = useState(true);\n  const [whoWon, setWhoWon] = useState(\"\");\n  const [cardsOfPlayer, setCardsOfPlayer] = useState([]);\n  const [cardValuesOfPlayer, setCardValuesOfPlayer] = useState([]); //todo change these initial values\n  //change to zero?\n\n  let [playerHand, setPlayerHand] = useState([-1, -1]); // let [dealerHand, setDealerHand] = useState([-1, -1]);\n\n  const [riskPropensityScore, setRiskPropensityScore] = useState(0);\n  useEffect(() => {\n    if (deck.length === 52) {\n      setUpBoard();\n    }\n  }, [deck]);\n\n  function play() {\n    setDeck(Array.from(Array(52).keys()));\n    setWhoWon(\"\");\n    setGameEnded(false);\n  }\n\n  function setUpBoard() {\n    let dealerCardsAndValues = setUpCards(2);\n    let playerCardsAndValues = setUpCards(2); // setCardsOfDealer(dealerCardsAndValues[0]);\n\n    cardsOfDealer = dealerCardsAndValues[0];\n    setCardsOfPlayer(playerCardsAndValues[0]);\n    cardValuesOfDealer = dealerCardsAndValues[1]; // setCardValuesOfDealer(dealerCardsAndValues[1]);\n\n    setCardValuesOfPlayer(playerCardsAndValues[1]);\n    realDealerHand = dealerCardsAndValues[2];\n    dealerHand = [dealerCardsAndValues[2][0], -1]; // dealerHand = dealerHand.push(dealerCardsAndValues[2][0]);\n    // dealerHand = dealerHand.push(-1);\n\n    setPlayerHand(playerCardsAndValues[2]);\n  }\n\n  function setUpCards(numCards) {\n    let cardsToAdd = [];\n    let cardsOfPerson = [];\n    let cardsValuesOfPerson = [];\n    let chosenKeys = [];\n\n    for (let i = 0; i < numCards; i++) {\n      let randIndex = Math.floor(Math.random() * deck.length);\n      let chosenCardKey = deck.splice(randIndex, 1);\n      setDeck(deck);\n      let chosenCard = cardFromKey(chosenCardKey);\n      cardsValuesOfPerson.push(chosenCardKey % 13 + 1);\n      cardsOfPerson.push(chosenCard);\n      chosenKeys.push(parseInt(chosenCardKey)); // chosenKeys.push(parseInt(chosenCardKey) + 1);\n    }\n\n    cardsToAdd.push(cardsOfPerson);\n    cardsToAdd.push(cardsValuesOfPerson);\n    cardsToAdd.push(chosenKeys);\n    return cardsToAdd;\n  } // TODO: Currently coded for the purpose of displaying as text message, but should change it\n  // to make it easier to find the right graphics to display\n\n\n  function cardFromKey(key) {\n    console.log(key);\n    let card = \"\";\n    let cardNumber = key % 13 + 1;\n\n    if (cardNumber === 1) {\n      card += \"Ace \";\n    } else if (cardNumber === 11) {\n      card += \"Jack \";\n    } else if (cardNumber === 12) {\n      card += \"Queen \";\n    } else if (cardNumber === 13) {\n      card += \"King \";\n    } else {\n      card += cardNumber + \" \";\n    } // Spades\n\n\n    if (key < 13) {\n      card += \"Spades \";\n    } // Hearts\n    else if (key < 26) {\n        card += \"Hearts \";\n      } // Clubs\n      else if (key < 39) {\n          card += \"Clubs \";\n        } // Diamonds\n        else {\n            card += \"Diamonds \";\n          }\n\n    return card;\n  }\n  /**\n  * Makes an axios request for player's risk propensity score.\n  */\n  // const requestRiskPropensityScore = () => {\n  //     const toSend = {\n  //         playerID: playerID\n  //     };\n  //     let config = {\n  //         headers: {\n  //             \"Content-Type\": \"application/json\",\n  //             'Access-Control-Allow-Origin': '*',\n  //         }\n  //     };\n  //     axios.post(\n  //         'http://localhost:4567/ways',\n  //         toSend,\n  //         config\n  //     ).then(response => {\n  //         setRiskPropensityScore(response.data);\n  //     })\n  //         .catch(function (error) {\n  //             console.log(error);\n  //         });\n  // }\n\n\n  useEffect(() => {\n    checkBust();\n  }, [cardValuesOfPlayer]);\n\n  function checkBust() {\n    const player = calculateScore(cardValuesOfPlayer);\n\n    if (player > 21) {\n      // update database for user's risk propensity score with final risk propensity score\n      setGameEnded(true);\n      setWhoWon(\"You Lose :(\");\n    }\n  }\n\n  function calculateScore(cards) {\n    let possibleScores = [0];\n\n    for (let i = 0; i < cards.length; i++) {\n      if (cards[i] === 11 || cards[i] === 12 || cards[i] === 13) {\n        for (let j = 0; j < possibleScores.length; j++) {\n          possibleScores[j] = possibleScores[j] + 10;\n        }\n      } else if (cards[i] === 1) {\n        let tentativeScores = [];\n\n        for (let j = 0; j < possibleScores.length; j++) {\n          tentativeScores.push(possibleScores[j] + 1);\n          tentativeScores.push(possibleScores[j] + 11); // possibleScores[j] = possibleScores[j] + 10;\n        }\n\n        possibleScores = tentativeScores;\n      } else {\n        for (let j = 0; j < possibleScores.length; j++) {\n          possibleScores[j] = possibleScores[j] + cards[i];\n        }\n      }\n    }\n\n    let score = bestScore(possibleScores);\n    return score;\n  }\n\n  function bestScore(scores) {\n    if (scores.length === 0) return 0;\n    let best = scores[0];\n\n    for (let i = 0; i < scores.length; i++) {\n      if (scores[i] > best && scores[i] <= 21) {\n        best = scores[i];\n      }\n    }\n\n    return best;\n  }\n\n  function hit() {\n    if (gameEnded) {\n      setWhoWon(\"Press play first\");\n    } else {\n      let playerCardsAndValues = setUpCards(1);\n      setCardsOfPlayer(cardsOfPlayer.concat(playerCardsAndValues[0]));\n      setCardValuesOfPlayer(cardValuesOfPlayer.concat(playerCardsAndValues[1]));\n      console.log(playerCardsAndValues[0][0]);\n      setPlayerHand(playerHand.concat(playerCardsAndValues[2])); // playerHand.push(playerCardsAndValues[2][0]);\n\n      console.log(playerHand);\n    } // update riskpropensityScore here\n    // setRiskPropensityScore(calculateRisk());\n\n  }\n\n  function calculateRisk() {\n    let remainingSum = sumOfValues;\n    const maxBeforeBust = 21 - calculateScore(cardValuesOfPlayer);\n    let count = 0;\n\n    for (let i = 0; i < deck.length; i++) {\n      if (deck[i] <= maxBeforeBust) {\n        count++;\n      }\n    }\n\n    return count / deck.length;\n  } // useEffect(() => {\n  //     if (dealerScore < 17) {\n  //         let dealerCardsAndValues = setUpCards(1);\n  //         setCardsOfDealer(cardsOfDealer.concat(dealerCardsAndValues[0]));\n  //         let newCards = cardValuesOfDealer.concat(dealerCardsAndValues[1])\n  //         setCardValuesOfDealer(newCards);\n  //         setDealerScore(calculateScore(newCards));\n  //     } else {\n  //         checkGameResults();\n  //     }\n  // }, [dealerScore])\n  // useEffect(() => {\n  //     if (playerStand) {\n  //         let dealerScore = calculateScore(cardValuesOfDealer);\n  //     }\n  // }, [playerStand])\n\n\n  function checkGameResults() {\n    const dealer = calculateScore(cardValuesOfDealer);\n    const player = calculateScore(cardValuesOfPlayer);\n    setGameEnded(true);\n\n    if (player > 21 || dealer < 22 && dealer >= player) {\n      // update database for user's risk propensity score with final risk propensity score\n      setWhoWon(\"You Lose :(\");\n    } else {\n      //display \"you win!\"\n      // update database for user's risk propensity score with final risk propensity score\n      setWhoWon(\"You Win!\");\n    }\n  }\n\n  function stand() {\n    // setPlayerStand(true);\n    // setDealerScore(calculateScore(cardValuesOfDealer));\n    // setDealerHand(realDealerHand);\n    if (gameEnded) {\n      setWhoWon(\"Press play first\");\n    } else {\n      dealerHand = realDealerHand;\n\n      while (calculateScore(cardValuesOfDealer) < 17) {\n        let dealerCardsAndValues = setUpCards(1);\n        cardsOfDealer = cardsOfDealer.concat(dealerCardsAndValues[0]);\n        cardValuesOfDealer = cardValuesOfDealer.concat(dealerCardsAndValues[1]); // setDealerHand(dealerHand.concat(dealerCardsAndValues[2]));\n        // setDealerHand(realDealerHand.concat(dealerCardsAndValues[2]));\n        // realDealerHand = realDealerHand.concat(dealerCardsAndValues[2]);\n\n        dealerHand = dealerHand.concat(dealerCardsAndValues[2]); // setCardsOfDealer(cardsOfDealer.concat(dealerCardsAndValues[0]));\n        // setCardValuesOfDealer(cardValuesOfDealer.concat(dealerCardsAndValues[1]));\n      }\n\n      checkGameResults();\n    }\n  }\n  /**\n   * Gets key longitude\n   * @param lon\n   * @param lambda\n   * @returns {JSX.Element}\n   */\n  //function convertKeytoCard(num) {\n  //     return Math.floor(lon / lambda) * lambda;\n  //}\n  // function Button() {\n  //     return <AwesomeButton type=\"primary\"> Button</AwesomeButton>;\n  // }\n\n\n  const Button = styled.button`\n  background-color: GoldenRod;\n  color: black;\n  font-size: 20px;\n  padding: 10px 60px;\n  border-radius: 5px;\n  margin: 10px 0px;\n  cursor: pointer;\n`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cards\",\n      children: [/*#__PURE__*/_jsxDEV(GameMessage, {\n        text: \"Dealer's cards: \",\n        hidden: gameEnded\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(GameMessage, {\n        text: cardsOfDealer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Hand, {\n        cards: dealerHand\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(GameMessage, {\n        text: \"Player's cards: \",\n        hidden: gameEnded\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(GameMessage, {\n        text: \"Player total \" + calculateScore(cardValuesOfPlayer),\n        hidden: gameEnded\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Hand, {\n        cards: playerHand\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buttons\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: play,\n        hidden: !gameEnded,\n        children: \"Play\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: hit,\n        hidden: gameEnded,\n        children: \"Hit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: stand,\n        hidden: gameEnded,\n        children: \"Stand\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(GameMessage, {\n        text: whoWon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 319,\n    columnNumber: 9\n  }, this);\n}\n\n_s(BlackJack, \"CSgnw13aTbL1tjKYtamC6GGh/y0=\");\n\n_c = BlackJack;\nexport default BlackJack;\n\nvar _c;\n\n$RefreshReg$(_c, \"BlackJack\");","map":{"version":3,"sources":["/Users/riarajesh/cs0320/term-project-eyan13-hlee184-mji13-rrajesh-wzhong3/blackjack/src/BlackJack.js"],"names":["React","useState","useEffect","styled","GameMessage","Hand","cardsOfDealer","cardValuesOfDealer","realDealerHand","dealerHand","BlackJack","sumOfValues","deck","setDeck","gameEnded","setGameEnded","whoWon","setWhoWon","cardsOfPlayer","setCardsOfPlayer","cardValuesOfPlayer","setCardValuesOfPlayer","playerHand","setPlayerHand","riskPropensityScore","setRiskPropensityScore","length","setUpBoard","play","Array","from","keys","dealerCardsAndValues","setUpCards","playerCardsAndValues","numCards","cardsToAdd","cardsOfPerson","cardsValuesOfPerson","chosenKeys","i","randIndex","Math","floor","random","chosenCardKey","splice","chosenCard","cardFromKey","push","parseInt","key","console","log","card","cardNumber","checkBust","player","calculateScore","cards","possibleScores","j","tentativeScores","score","bestScore","scores","best","hit","concat","calculateRisk","remainingSum","maxBeforeBust","count","checkGameResults","dealer","stand","Button","button"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\n// import AwesomeButtonStyles from \"react-awesome-button/src/styles/styles.scss\";\nimport \"react-awesome-button/dist/styles.css\";\n// import TextBox from \"./TextBox\";\nimport GameMessage from \"./GameMessage\";\nimport './BlackJack.css';\nimport Hand from \"./Hand.js\";\n// import { useAuth } from \"../../context/AuthContext\";\n// import { useDatabase } from \"../../context/DatabaseContext\";\n\n\nlet cardsOfDealer = [];\nlet cardValuesOfDealer = [];\nlet realDealerHand = [];\nlet dealerHand = [-1, -1];\nfunction BlackJack() {\n    // const { currentUser } = useAuth();\n    // const { getEntry, userDatabase } = useDatabase();\n\n    // const [profileInfo, setProfileInfo] = useState({\n    //     bio: \"\", name: \"\", age: \"\", matches: []});\n    // let dealerHand = [-1, -1];\n\n    // Sum of all values in a deck of card 4(1 + 2 + ... + 13).\n    const sumOfValues = 364;\n\n    const [deck, setDeck] = useState([]);\n    const [gameEnded, setGameEnded] = useState(true);\n\n    const [whoWon, setWhoWon] = useState(\"\");\n\n    const [cardsOfPlayer, setCardsOfPlayer] = useState([]);\n    const [cardValuesOfPlayer, setCardValuesOfPlayer] = useState([]);\n    //todo change these initial values\n    //change to zero?\n    let [playerHand, setPlayerHand] = useState([-1, -1]);\n    // let [dealerHand, setDealerHand] = useState([-1, -1]);\n\n    const [riskPropensityScore, setRiskPropensityScore] = useState(0);\n\n    useEffect(() => {\n        if (deck.length === 52) {\n            setUpBoard();\n        }\n    }, [deck])\n\n    function play() {\n        setDeck(Array.from(Array(52).keys()));\n        setWhoWon(\"\");\n        setGameEnded(false);\n    }\n\n    function setUpBoard() {\n        let dealerCardsAndValues = setUpCards(2);\n        let playerCardsAndValues = setUpCards(2);\n        // setCardsOfDealer(dealerCardsAndValues[0]);\n        cardsOfDealer = dealerCardsAndValues[0];\n        setCardsOfPlayer(playerCardsAndValues[0]);\n        cardValuesOfDealer = dealerCardsAndValues[1];\n        // setCardValuesOfDealer(dealerCardsAndValues[1]);\n        setCardValuesOfPlayer(playerCardsAndValues[1]);\n        realDealerHand = dealerCardsAndValues[2];\n        dealerHand = [dealerCardsAndValues[2][0], -1];\n        // dealerHand = dealerHand.push(dealerCardsAndValues[2][0]);\n        // dealerHand = dealerHand.push(-1);\n        setPlayerHand(playerCardsAndValues[2]);\n    }\n\n    function setUpCards(numCards) {\n        let cardsToAdd = [];\n        let cardsOfPerson = [];\n        let cardsValuesOfPerson = [];\n        let chosenKeys = [];\n\n        for (let i = 0; i < numCards; i++) {\n            let randIndex = Math.floor(Math.random() * deck.length);\n            let chosenCardKey = deck.splice(randIndex, 1);\n            setDeck(deck);\n            let chosenCard = cardFromKey(chosenCardKey);\n\n            cardsValuesOfPerson.push(chosenCardKey % 13 + 1);\n            cardsOfPerson.push(chosenCard);\n            chosenKeys.push(parseInt(chosenCardKey));\n            // chosenKeys.push(parseInt(chosenCardKey) + 1);\n        }\n        cardsToAdd.push(cardsOfPerson);\n        cardsToAdd.push(cardsValuesOfPerson);\n        cardsToAdd.push(chosenKeys);\n\n        return cardsToAdd;\n    }\n\n    // TODO: Currently coded for the purpose of displaying as text message, but should change it\n    // to make it easier to find the right graphics to display\n    function cardFromKey(key) {\n        console.log(key);\n        let card = \"\";\n\n        let cardNumber = key % 13 + 1;\n        if (cardNumber === 1) {\n            card += \"Ace \";\n        } else if (cardNumber === 11) {\n            card += \"Jack \";\n        } else if (cardNumber === 12) {\n            card += \"Queen \";\n        } else if (cardNumber === 13) {\n            card += \"King \";\n        } else {\n            card += cardNumber + \" \";\n        }\n\n        // Spades\n        if (key < 13) {\n            card += \"Spades \";\n        }\n        // Hearts\n        else if (key < 26) {\n            card += \"Hearts \";\n        }\n        // Clubs\n        else if (key < 39) {\n            card += \"Clubs \";\n        }\n        // Diamonds\n        else {\n            card += \"Diamonds \";\n        }\n\n        return card;\n    }\n\n    /**\n    * Makes an axios request for player's risk propensity score.\n    */\n    // const requestRiskPropensityScore = () => {\n    //     const toSend = {\n    //         playerID: playerID\n    //     };\n\n    //     let config = {\n    //         headers: {\n    //             \"Content-Type\": \"application/json\",\n    //             'Access-Control-Allow-Origin': '*',\n    //         }\n    //     };\n\n    //     axios.post(\n    //         'http://localhost:4567/ways',\n    //         toSend,\n    //         config\n    //     ).then(response => {\n    //         setRiskPropensityScore(response.data);\n    //     })\n\n    //         .catch(function (error) {\n    //             console.log(error);\n    //         });\n    // }\n\n    useEffect(() => {\n        checkBust();\n    }, [cardValuesOfPlayer])\n\n    function checkBust() {\n        const player = calculateScore(cardValuesOfPlayer);\n        if (player > 21) {\n            // update database for user's risk propensity score with final risk propensity score\n            setGameEnded(true);\n            setWhoWon(\"You Lose :(\");\n        }\n    }\n\n    function calculateScore(cards) {\n        let possibleScores = [0];\n        for (let i = 0; i < cards.length; i++) {\n            if (cards[i] === 11 || cards[i] === 12 || cards[i] === 13) {\n                for (let j = 0; j < possibleScores.length; j++) {\n                    possibleScores[j] = possibleScores[j] + 10;\n                }\n            } else if (cards[i] === 1) {\n                let tentativeScores = [];\n                for (let j = 0; j < possibleScores.length; j++) {\n                    tentativeScores.push(possibleScores[j] + 1);\n                    tentativeScores.push(possibleScores[j] + 11);\n                    // possibleScores[j] = possibleScores[j] + 10;\n                }\n                possibleScores = tentativeScores;\n            } else {\n                for (let j = 0; j < possibleScores.length; j++) {\n                    possibleScores[j] = possibleScores[j] + cards[i];\n                }\n            }\n        }\n        let score = bestScore(possibleScores);\n        return score;\n    }\n\n    function bestScore(scores) {\n        if (scores.length === 0) return 0;\n        let best = scores[0];\n        for (let i = 0; i < scores.length; i++) {\n            if (scores[i] > best && scores[i] <= 21) {\n                best = scores[i];\n            }\n        }\n        return best;\n    }\n\n\n    function hit() {\n        if (gameEnded) {\n            setWhoWon(\"Press play first\");\n        } else {\n            let playerCardsAndValues = setUpCards(1);\n            setCardsOfPlayer(cardsOfPlayer.concat(playerCardsAndValues[0]));\n            setCardValuesOfPlayer(cardValuesOfPlayer.concat(playerCardsAndValues[1]));\n            console.log(playerCardsAndValues[0][0])\n            setPlayerHand(playerHand.concat(playerCardsAndValues[2]));\n            // playerHand.push(playerCardsAndValues[2][0]);\n            console.log(playerHand);\n        }\n        // update riskpropensityScore here\n        // setRiskPropensityScore(calculateRisk());\n    }\n\n    function calculateRisk() {\n        let remainingSum = sumOfValues;\n        const maxBeforeBust = 21 - calculateScore(cardValuesOfPlayer);\n        let count = 0;\n        for (let i = 0; i < deck.length; i++) {\n            if (deck[i] <= maxBeforeBust) {\n                count++;\n            }\n        }\n        return count / deck.length;\n    }\n\n    // useEffect(() => {\n    //     if (dealerScore < 17) {\n    //         let dealerCardsAndValues = setUpCards(1);\n    //         setCardsOfDealer(cardsOfDealer.concat(dealerCardsAndValues[0]));\n    //         let newCards = cardValuesOfDealer.concat(dealerCardsAndValues[1])\n    //         setCardValuesOfDealer(newCards);\n    //         setDealerScore(calculateScore(newCards));\n    //     } else {\n    //         checkGameResults();\n    //     }\n    // }, [dealerScore])\n\n    // useEffect(() => {\n    //     if (playerStand) {\n    //         let dealerScore = calculateScore(cardValuesOfDealer);\n    //     }\n    // }, [playerStand])\n\n    function checkGameResults() {\n        const dealer = calculateScore(cardValuesOfDealer);\n        const player = calculateScore(cardValuesOfPlayer);\n        setGameEnded(true);\n        if (player > 21 || (dealer < 22 && dealer >= player)) {\n            // update database for user's risk propensity score with final risk propensity score\n            setWhoWon(\"You Lose :(\");\n        } else {\n            //display \"you win!\"\n            // update database for user's risk propensity score with final risk propensity score\n            setWhoWon(\"You Win!\");\n        }\n    }\n\n    function stand() {\n        // setPlayerStand(true);\n        // setDealerScore(calculateScore(cardValuesOfDealer));\n        // setDealerHand(realDealerHand);\n        if (gameEnded) {\n            setWhoWon(\"Press play first\");\n        } else {\n            dealerHand = realDealerHand;\n            while (calculateScore(cardValuesOfDealer) < 17) {\n                let dealerCardsAndValues = setUpCards(1);\n                cardsOfDealer = cardsOfDealer.concat(dealerCardsAndValues[0]);\n                cardValuesOfDealer = cardValuesOfDealer.concat(dealerCardsAndValues[1]);\n                // setDealerHand(dealerHand.concat(dealerCardsAndValues[2]));\n                // setDealerHand(realDealerHand.concat(dealerCardsAndValues[2]));\n                // realDealerHand = realDealerHand.concat(dealerCardsAndValues[2]);\n                dealerHand = dealerHand.concat(dealerCardsAndValues[2]);\n                // setCardsOfDealer(cardsOfDealer.concat(dealerCardsAndValues[0]));\n                // setCardValuesOfDealer(cardValuesOfDealer.concat(dealerCardsAndValues[1]));\n            }\n            checkGameResults();\n        }\n    }\n\n    /**\n     * Gets key longitude\n     * @param lon\n     * @param lambda\n     * @returns {JSX.Element}\n     */\n    //function convertKeytoCard(num) {\n    //     return Math.floor(lon / lambda) * lambda;\n\n    //}\n    // function Button() {\n    //     return <AwesomeButton type=\"primary\"> Button</AwesomeButton>;\n    // }\n    const Button = styled.button`\n  background-color: GoldenRod;\n  color: black;\n  font-size: 20px;\n  padding: 10px 60px;\n  border-radius: 5px;\n  margin: 10px 0px;\n  cursor: pointer;\n`;\n\n    return (\n        <div className=\"body\">\n            <div className=\"cards\">\n                <GameMessage text={\"Dealer's cards: \"} hidden={gameEnded}/>\n                <GameMessage text={cardsOfDealer} />\n                <Hand cards={dealerHand} />\n                <br />\n                <GameMessage text={\"Player's cards: \"} hidden={gameEnded}/>\n                <GameMessage text={\"Player total \" + calculateScore(cardValuesOfPlayer)} hidden={gameEnded}/>\n                <Hand cards={playerHand} />\n            </div>\n            <div className=\"buttons\">\n                <Button onClick={play} hidden={!gameEnded}>Play</Button>\n                <br />\n                <Button\n                    onClick={hit} hidden={gameEnded}>Hit</Button>\n                <br />\n                <Button onClick={stand} hidden={gameEnded}>Stand</Button>\n                <br />\n                <GameMessage text={whoWon} />\n            </div>\n        </div>\n\n    )\n}\n\n\nexport default BlackJack"]},"metadata":{},"sourceType":"module"}